<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexona OS - Proposal Management Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-left">
            <h1 class="logo">Hexona OS</h1>
        </div>
        <div class="header-right">
            <div class="notifications">
                <span class="notification-badge">3</span>
                <svg class="icon-bell" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
            </div>
            <div class="user-info">
                <span class="user-name">Hamza</span>
                <span class="user-role">Admin</span>
            </div>
        </div>
    </header>

    <!-- Metrics Bar -->
    <section class="metrics-bar">
        <div class="metric-card">
            <span class="metric-label">Total Proposals</span>
            <span class="metric-value">124</span>
            <span class="metric-change positive">+12 this week</span>
        </div>
        <div class="metric-card">
            <span class="metric-label">Conversion Rate</span>
            <span class="metric-value">15.3%</span>
            <span class="metric-change positive">↑ from 5%</span>
        </div>
        <div class="metric-card">
            <span class="metric-label">Avg Cycle Time</span>
            <span class="metric-value">18 hrs</span>
            <span class="metric-change positive">↓ from 48 hrs</span>
        </div>
        <div class="metric-card">
            <span class="metric-label">In Progress</span>
            <span class="metric-value">8</span>
            <span class="metric-change">2 overdue</span>
        </div>
    </section>

    <!-- Filter Bar -->
    <section class="filter-bar">
        <button class="btn btn-primary" onclick="openNewProposal()">
            + New Proposal
        </button>
        <div class="filter-group">
            <input type="text" class="search-input" placeholder="Search proposals...">
            <select class="filter-select">
                <option value="">All Partners</option>
                <option value="rachit">Rachit Saini</option>
                <option value="rob">Rob Whelan</option>
                <option value="jack">Jack Taitague</option>
                <option value="brandon">Brandon & Dean</option>
                <option value="automato">Automato</option>
                <option value="christina">Christina Samaan</option>
                <option value="harry">Harry-Finley</option>
            </select>
            <select class="filter-select">
                <option value="">All Types</option>
                <option value="blueprint">Blueprint</option>
                <option value="discovery">Discovery</option>
                <option value="custom">Custom</option>
            </select>
        </div>
    </section>

    <!-- View Selector -->
    <section class="view-selector-bar">
        <div class="view-toggle-buttons">
            <button class="view-toggle-btn active" onclick="window.location.href='index.html'">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <rect x="1" y="2" width="4" height="12"></rect>
                    <rect x="6" y="2" width="4" height="12"></rect>
                    <rect x="11" y="2" width="4" height="12"></rect>
                </svg>
                Kanban
            </button>
            <button class="view-toggle-btn" onclick="window.location.href='list-view.html'">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <rect x="2" y="3" width="12" height="2"></rect>
                    <rect x="2" y="7" width="12" height="2"></rect>
                    <rect x="2" y="11" width="12" height="2"></rect>
                </svg>
                List View
            </button>
        </div>
    </section>

    <!-- Main Pipeline View -->
    <main class="pipeline-container">
        <!-- Court Labels -->
        <div class="court-labels">
            <span class="court-label internal">OUR COURT</span>
            <span class="court-label external">THEIR COURT</span>
        </div>
        <div class="pipeline-wrapper">
            <!-- PENDING Column -->
            <div class="pipeline-column internal-stage" data-status="pending">
                <div class="column-header">
                    <h3>PENDING</h3>
                    <span class="column-count">2</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-1">
                        <div class="card-header">
                            <span class="card-type blueprint">Blueprint</span>
                            <span class="card-sla green">2h left</span>
                        </div>
                        <h4 class="card-title">TechCorp Automation</h4>
                        <div class="card-partner">
                            <div class="partner-dropdown">
                                <div class="partner-selected" onclick="togglePartnerDropdown(event, 'prop-1')" data-partner="Brandon & Dean">
                                    <span>Brandon & Dean</span>
                                    <span class="dropdown-arrow">▼</span>
                                </div>
                                <div class="partner-dropdown-menu" id="partner-menu-prop-1">
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Rachit Saini')">Rachit Saini</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Rob Whelan')">Rob Whelan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Jack Taitague')">Jack Taitague</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Challon Nazaire')">Challon Nazaire</div>
                                    <div class="partner-option selected" onclick="selectPartner(event, 'prop-1', 'Brandon & Dean')">Brandon & Dean</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Automato')">Automato</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Christina Samaan')">Christina Samaan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Harry-Finley')">Harry-Finley</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-1', 'Various Partners')">Various Partners</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-meta">
                            <span class="card-status triaging">Ayman triaging</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$15,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-1')">View</button>
                        </div>
                    </div>
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-2">
                        <div class="card-header">
                            <span class="card-type discovery">Discovery</span>
                            <span class="card-sla yellow">45m left</span>
                        </div>
                        <h4 class="card-title">RetailPlus Integration</h4>
                        <div class="card-partner">
                            <div class="partner-dropdown">
                                <div class="partner-selected" onclick="togglePartnerDropdown(event, 'prop-2')" data-partner="Automato">
                                    <span>Automato</span>
                                    <span class="dropdown-arrow">▼</span>
                                </div>
                                <div class="partner-dropdown-menu" id="partner-menu-prop-2">
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Rachit Saini')">Rachit Saini</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Rob Whelan')">Rob Whelan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Jack Taitague')">Jack Taitague</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Challon Nazaire')">Challon Nazaire</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Brandon & Dean')">Brandon & Dean</div>
                                    <div class="partner-option selected" onclick="selectPartner(event, 'prop-2', 'Automato')">Automato</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Christina Samaan')">Christina Samaan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Harry-Finley')">Harry-Finley</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-2', 'Various Partners')">Various Partners</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-meta">
                            <span class="card-status triaging">Ayman triaging</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$8,500</span>
                            <button class="card-action" onclick="openProposalDetail('prop-2')">View</button>
                        </div>
                    </div>
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-12">
                        <div class="card-header">
                            <span class="card-type custom">Custom</span>
                            <span class="card-sla red">Overdue</span>
                        </div>
                        <h4 class="card-title">DataFlow Analytics</h4>
                        <div class="card-partner">
                            <div class="partner-dropdown">
                                <div class="partner-selected" onclick="togglePartnerDropdown(event, 'prop-12')" data-partner="Rob Whelan">
                                    <span>Rob Whelan</span>
                                    <span class="dropdown-arrow">▼</span>
                                </div>
                                <div class="partner-dropdown-menu" id="partner-menu-prop-12">
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Rachit Saini')">Rachit Saini</div>
                                    <div class="partner-option selected" onclick="selectPartner(event, 'prop-12', 'Rob Whelan')">Rob Whelan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Jack Taitague')">Jack Taitague</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Challon Nazaire')">Challon Nazaire</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Brandon & Dean')">Brandon & Dean</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Automato')">Automato</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Christina Samaan')">Christina Samaan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Harry-Finley')">Harry-Finley</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-12', 'Various Partners')">Various Partners</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-meta">
                            <span class="card-status triaged">Ayman triaged</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$19,500</span>
                            <button class="card-action" onclick="openProposalDetail('prop-12')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TRIAGE Column -->
            <div class="pipeline-column internal-stage" data-status="triage">
                <div class="column-header">
                    <h3>TRIAGE</h3>
                    <span class="column-count">1</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-3">
                        <div class="card-header">
                            <span class="card-type custom">Custom</span>
                            <span class="card-sla green">6h left</span>
                        </div>
                        <h4 class="card-title">FinanceFlow System</h4>
                        <div class="card-partner">
                            <div class="partner-dropdown">
                                <div class="partner-selected" onclick="togglePartnerDropdown(event, 'prop-3')" data-partner="Harry-Finley">
                                    <span>Harry-Finley</span>
                                    <span class="dropdown-arrow">▼</span>
                                </div>
                                <div class="partner-dropdown-menu" id="partner-menu-prop-3">
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Rachit Saini')">Rachit Saini</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Rob Whelan')">Rob Whelan</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Jack Taitague')">Jack Taitague</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Challon Nazaire')">Challon Nazaire</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Brandon & Dean')">Brandon & Dean</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Automato')">Automato</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Christina Samaan')">Christina Samaan</div>
                                    <div class="partner-option selected" onclick="selectPartner(event, 'prop-3', 'Harry-Finley')">Harry-Finley</div>
                                    <div class="partner-option" onclick="selectPartner(event, 'prop-3', 'Various Partners')">Various Partners</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-meta">
                            <span class="card-status triaged">Ayman triaged</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$25,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-3')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DRAFTING Column -->
            <div class="pipeline-column internal-stage" data-status="drafting">
                <div class="column-header">
                    <h3>DRAFTING</h3>
                    <span class="column-count">2</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-4">
                        <div class="card-header">
                            <span class="card-type blueprint">Blueprint</span>
                            <span class="card-sla green">12h left</span>
                        </div>
                        <h4 class="card-title">EcomPro Automation</h4>
                        <p class="card-client">Client: EcomPro Solutions</p>
                        <div class="card-meta">
                            <span class="card-status creating">Abdul Rahim creating</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$12,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-4')">View</button>
                        </div>
                    </div>
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-5">
                        <div class="card-header">
                            <span class="card-type discovery">Discovery</span>
                            <span class="card-sla yellow">3h left</span>
                        </div>
                        <h4 class="card-title">LogisticsPro Analysis</h4>
                        <p class="card-client">Client: LogisticsPro Ltd</p>
                        <div class="card-meta">
                            <span class="card-status created">Abdul Rahim created</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$18,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-5')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- REVIEW Column -->
            <div class="pipeline-column internal-stage" data-status="review">
                <div class="column-header">
                    <h3>REVIEW</h3>
                    <span class="column-count">1</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-6">
                        <div class="card-header">
                            <span class="card-type custom">Custom</span>
                            <span class="card-sla green">8h left</span>
                        </div>
                        <h4 class="card-title">HealthTech Platform</h4>
                        <p class="card-client">Client: HealthTech Systems</p>
                        <div class="card-meta">
                            <span class="card-status reviewed">Ayman reviewed</span>
                            <span class="quality-score">Quality: 4.2/5</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$32,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-6')">View</button>
                        </div>
                    </div>
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-13">
                        <div class="card-header">
                            <span class="card-type blueprint">Blueprint</span>
                            <span class="card-sla yellow">4h left</span>
                        </div>
                        <h4 class="card-title">CloudSync Integration</h4>
                        <p class="card-client">Client: CloudSync Corp</p>
                        <div class="card-meta">
                            <span class="card-status escalated">Escalated to Hamza</span>
                            <span class="quality-score">Quality: 3.8/5</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$27,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-13')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vertical Separator -->
            <div class="stage-separator"></div>

            <!-- SENT Column -->
            <div class="pipeline-column external-stage" data-status="sent">
                <div class="column-header">
                    <h3>SENT</h3>
                    <span class="column-count">3</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-7">
                        <div class="card-header">
                            <span class="card-type blueprint">Blueprint</span>
                            <span class="card-age">3 days ago</span>
                        </div>
                        <h4 class="card-title">MarketingHub Setup</h4>
                        <p class="card-client">Client: MarketingHub Co</p>
                        <div class="card-meta">
                            <span class="last-nudge">Next nudge: Tomorrow</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$9,500</span>
                            <button class="card-action" onclick="openProposalDetail('prop-7')">View</button>
                        </div>
                    </div>
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-8">
                        <div class="card-header">
                            <span class="card-type discovery">Discovery</span>
                            <span class="card-age">5 days ago</span>
                        </div>
                        <h4 class="card-title">SalesPro Integration</h4>
                        <p class="card-client">Client: SalesPro Inc</p>
                        <div class="card-meta">
                            <span class="last-nudge warning">Needs follow-up</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$14,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-8')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEGOTIATION Column -->
            <div class="pipeline-column external-stage" data-status="negotiation">
                <div class="column-header">
                    <h3>NEGOTIATION</h3>
                    <span class="column-count">1</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card" draggable="true" ondragstart="drag(event)" id="prop-9">
                        <div class="card-header">
                            <span class="card-type custom">Custom</span>
                            <span class="card-age">2 days ago</span>
                        </div>
                        <h4 class="card-title">DataSync Enterprise</h4>
                        <p class="card-client">Client: DataSync Corp</p>
                        <div class="card-meta">
                            <span class="negotiation-status">Verbal commitment</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$28,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-9')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WON/LOST Column -->
            <div class="pipeline-column external-stage" data-status="closed">
                <div class="column-header">
                    <h3>CLOSED</h3>
                    <span class="column-count">2</span>
                </div>
                <div class="column-body" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="proposal-card won" draggable="true" ondragstart="drag(event)" id="prop-10">
                        <div class="card-header">
                            <span class="card-status won">WON</span>
                            <span class="card-age">Yesterday</span>
                        </div>
                        <h4 class="card-title">CloudOps Migration</h4>
                        <p class="card-client">Client: CloudOps Technologies</p>
                        <div class="card-footer">
                            <span class="card-value">$22,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-10')">View</button>
                        </div>
                    </div>
                    <div class="proposal-card lost" draggable="true" ondragstart="drag(event)" id="prop-11">
                        <div class="card-header">
                            <span class="card-status lost">LOST</span>
                            <span class="card-age">2 days ago</span>
                        </div>
                        <h4 class="card-title">InventoryPro System</h4>
                        <p class="card-client">Client: InventoryPro LLC</p>
                        <div class="card-meta">
                            <span class="loss-reason">Budget constraints</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-value">$16,000</span>
                            <button class="card-action" onclick="openProposalDetail('prop-11')">View</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Proposal Detail Modal -->
    <div id="proposalModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="js/app.js"></script>
</body>
</html>